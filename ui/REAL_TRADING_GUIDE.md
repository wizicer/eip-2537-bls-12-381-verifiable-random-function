# 真实交易使用指南

## 修改完成

虚拟交易已被停用，现在前端使用真实的智能合约交易。

## 主要变化

### 1. 新的交易组件
- 创建了 `RealTradingView.tsx` 组件
- 使用 `darkPoolService` 与智能合约交互
- 所有交易都会发送到本地Hardhat链

### 2. 交易流程
1. **连接钱包** - 必须连接MetaMask到本地网络（31337）
2. **网络验证** - 自动检测是否在正确的网络上
3. **提交订单** - 通过智能合约提交，生成真实的交易哈希
4. **交易确认** - 显示交易哈希，可在MetaMask中查看

### 3. 隐私特性
- 价格默认隐藏（显示为****）
- 可点击眼睛图标显示/隐藏价格
- 保持隐私保护的设计理念

## 使用步骤

### 1. 确保环境运行
```bash
# Terminal 1: 运行Hardhat本地节点
cd hardhat
npx hardhat node

# Terminal 2: 运行前端（应已在运行）
cd dark-pool-frontend
npm run dev
```

### 2. 配置MetaMask
- 网络名称：Hardhat Localhost
- RPC URL：http://127.0.0.1:8545
- 链ID：31337
- 货币符号：ETH

### 3. 导入测试账户
使用第一个测试账户的私钥：
```
0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
```

### 4. 进行真实交易
1. 访问 http://localhost:5173/
2. 点击"Connect Wallet"连接钱包
3. 确认显示"✅ Localhost 8545"
4. 选择订单类型（限价/市价）
5. 选择买卖方向
6. 输入数量和价格
7. 点击"Place Order"
8. 在MetaMask中确认交易
9. 查看交易哈希

## 重要说明

- **真实交易**：所有订单都会作为交易记录在区块链上
- **Gas费用**：虽然是本地网络，但仍会显示Gas消耗
- **交易持久性**：只要Hardhat节点运行，交易数据就会保留
- **隐私保护**：价格默认隐藏，需要手动显示

## 合约地址
- DarkPool合约：0x5FbDB2315678afecb367f032d93F642f64180aa3

## 故障排除

1. **交易失败**
   - 确保在正确的网络（31337）
   - 确保账户有足够的ETH
   - 检查合约是否正确部署

2. **无法连接钱包**
   - 确保MetaMask已安装
   - 确保已添加本地网络到MetaMask

3. **价格显示问题**
   - 点击眼睛图标显示/隐藏价格
   - 这是隐私保护特性

现在你可以进行真实的区块链交易了！